# esphome-config
my esphome config file repo

# 说明

本仓库主要存放`esphome`相关的配置文件

配置文件的结构尽可能的按照coding的思想进行了最小化功能抽象

便于多个`esphome`设备的配置/修改/使用

# esphome 配置引用说明

esphome 引用说明

当需要把文件内容当作key/value引用的时候 在对应缩进 使用 <<: !include filename

当需要把文件内容当作列表中的一项的时候   在对应缩进 使用 - !include filename

当需要引用变量(替换)的时候 使用 $

变量替换举例 foo: bar

name: $foo 这样配置说明 name 最后的值为 bar

name: ${foo}_1 这样配置说明 name 最后值为 bar_1 当需要把变量替换和其他字符连接起来时需要用{}把变量包裹起来

tips: 变量可以在多层次引用文件中使用

# 相关设备配置

## esp32 机械键盘开关带led

按照最小功能设计

尽量把功能设计到通用

### 1键开关 实现基础功能

单击 控制 继电器 通断(反转)

长按 设备重启

双击 led灯效切换

三连击 显示设备当前状态 

+ 状态为已经连接api  蓝灯闪烁 
+ 状态为已经连接wifi 绿灯闪烁
+ 状态为未连接到wifi 红灯闪烁

### 4键开关 实现基础功能

1键 
单击 控制 继电器1 通断(反转)

长按 设备重启

双击 led灯效切换

三连击 显示设备当前状态 

+ 状态为已经连接api  蓝灯闪烁 
+ 状态为已经连接wifi 绿灯闪烁
+ 状态为未连接到wifi 红灯闪烁

2键 
单击 控制 继电器2 通断(反转)

3键 
单击 控制 继电器1 开 继电器2 开

4键 
单击 控制 继电器1 关 继电器2 关

### 多键开关可以实现更多花样

有更多的场景 值得探索

比如有人习惯多键同时按下 关闭所有继电器

接入ha之后可以一键关联开启多个开关的led等效


# 参考

[esphome-config](https://github.com/AlexMekkering/esphome-config)